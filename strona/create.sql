create table "chat" (chat_platform_id bigint not null, id bigint generated by default as identity, uuid uuid not null, chat_main_id varchar(255) not null, name varchar(255) not null, primary key (id));
create table "file" (chat_id bigint not null, id bigint generated by default as identity, name varchar(255) not null, data oid not null, primary key (id));
create table "group" (id bigint generated by default as identity, uuid uuid not null, name varchar(255) not null, primary key (id));
create table "role" (id bigint generated by default as identity, name varchar(255), primary key (id));
create table "user" (id bigint generated by default as identity, auth_key varchar(255) not null, email varchar(255) not null, first_name varchar(255) not null, last_name varchar(255) not null, password varchar(255) not null, primary key (id));
create table chatplatform (id bigint generated by default as identity, name varchar(255) not null, primary key (id));
create table group_chat_mapping (chat_id bigint not null, group_id bigint not null, primary key (chat_id, group_id));
create table group_announcement (end_time timestamp(6), "group_id" bigint, id bigint generated by default as identity, start_time timestamp(6), content TEXT not null, primary key (id));
create table invitation_token (expiry_date timestamp(6), "group_id" bigint, id bigint generated by default as identity, token varchar(64), primary key (id));
create table message (chat_id bigint not null, id bigint generated by default as identity, timestamp timestamp(6) not null, content varchar(255) not null, username varchar(255) not null, primary key (id));
create table user_group_role (group_id bigint not null, id bigint generated by default as identity, role_id bigint not null, user_id bigint not null, primary key (id));
create table user_group (group_id bigint not null, user_id bigint not null, primary key (group_id, user_id));
create table users_role (id bigint generated by default as identity, role_id bigint not null, user_id bigint not null, primary key (id));
alter table if exists "chat" add constraint FK3n2dvjw1q18aw8bm8w0nkot5j foreign key (chat_platform_id) references chatplatform;
alter table if exists "file" add constraint FKriju12iqu9fhayhwbwc2m3be4 foreign key (chat_id) references "chat";
alter table if exists group_chat_mapping add constraint FKj7c7ly99y5ippylrsp066jxhm foreign key (group_id) references "group";
alter table if exists group_chat_mapping add constraint FK9o0x41k7qj14cmrvie53ycxj8 foreign key (chat_id) references "chat";
alter table if exists group_announcement add constraint FKc2f2ojc192d8f3e5ixxpjr5jm foreign key ("group_id") references "group";
alter table if exists invitation_token add constraint FK5n8pdi2u9spjrs539kksq0s51 foreign key ("group_id") references "group";
alter table if exists message add constraint FKg9vt0r6ilcsvkne8xlkpu4i76 foreign key (chat_id) references "chat";
alter table if exists user_group_role add constraint FKci8gnvkfesk10k58on4f3lofm foreign key (group_id) references "group";
alter table if exists user_group_role add constraint FKka4vueh9c5d8n1pbditov3r59 foreign key (role_id) references "role";
alter table if exists user_group_role add constraint FK9sfxyaxy37gpn0s0jfumfxhk6 foreign key (user_id) references "user";
alter table if exists user_group add constraint FK1vm7hjlu1n79o7y4ga4091dj6 foreign key (user_id) references "user";
alter table if exists user_group add constraint FK71ue7uuqo0neoodkx7smf7e3o foreign key (group_id) references "group";
alter table if exists users_role add constraint FKoy0ltcxpfkatmbrql5t54p5un foreign key (role_id) references "role";
alter table if exists users_role add constraint FKego7uq09gdp3tkt4eknvjgwf2 foreign key (user_id) references "user";
